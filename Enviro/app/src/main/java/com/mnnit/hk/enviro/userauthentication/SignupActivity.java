package com.mnnit.hk.enviro.userauthentication;import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import android.os.Bundle;import android.view.View;import android.widget.EditText;import android.widget.TextView;import android.widget.Toast;import com.google.android.gms.tasks.OnCompleteListener;import com.google.android.gms.tasks.Task;import com.google.firebase.auth.AuthResult;import com.google.firebase.auth.FirebaseAuth;import com.google.firebase.auth.FirebaseAuthActionCodeException;import com.google.firebase.auth.FirebaseAuthUserCollisionException;import com.google.firebase.auth.FirebaseUser;import com.mnnit.hk.enviro.OnStartActivity;import com.mnnit.hk.enviro.R;public class SignupActivity extends AppCompatActivity {    private String nameSignup;    private int ageSignup;    private String emailSignup;    private String passwordSignup;    private FirebaseAuth mAuth;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_signup);        mAuth = FirebaseAuth.getInstance();    }    public void signup(View view)    {        try {            nameSignup = ((TextView)findViewById(R.id.nameSignup)).getText().toString();            ageSignup = Integer.parseInt(((TextView)findViewById(R.id.ageSignup)).getText().toString());            emailSignup = ((TextView)findViewById(R.id.emailSignup)).getText().toString();            passwordSignup = ((TextView)findViewById(R.id.passwordSignup)).getText().toString();            if (notEmpty())                mAuth.createUserWithEmailAndPassword(emailSignup, passwordSignup)                        .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {                            @Override                            public void onComplete(@NonNull Task<AuthResult> task) {                                if (task.isSuccessful()) {                                    // Sign in success, update UI with the signed-in user's information                                    FirebaseUser user = mAuth.getCurrentUser();                                    Toast.makeText(SignupActivity.this, "Signup successful " + user, Toast.LENGTH_LONG).show();//                                    for(long i = 1 ; i<1000000000 ; i++)//                                        i=i;                                    //SignupActivity.this.finish();                                    //updateUI(user);                                } else if(task.getException() instanceof  FirebaseAuthUserCollisionException) {   //this is how we have to handle the firebase exceptions                                    // If sign in fails, display a message to the user.                                    //Toast.makeText(EmailPasswordActivity.this, "Authentication failed.",Toast.LENGTH_SHORT).show();                                    //updateUI(null);                                    Toast.makeText(SignupActivity.this, "Signup Failed " + task.getException().getMessage(), Toast.LENGTH_LONG).show();                                }                                // ...                            }                        });        } catch(Exception e)        {            Toast.makeText(this,e.getMessage(),Toast.LENGTH_LONG).show();        }    }    private boolean notEmpty()    {        //Toast.makeText(this,nameSignup+" "+ageSignup+" "+emailSignup+" "+passwordSignup,Toast.LENGTH_LONG).show();        if( passwordSignup.length()<8 )            return false;        if( !nameSignup.isEmpty() && !emailSignup.isEmpty() && ageSignup>=10 && ageSignup<100 )            return true;        return false;    }}